## Serve PageTemplates with Medusa

Originally published: 2002-10-18 17:16:53
Last updated: 2002-10-18 17:16:53
Author: Troy Melhase

This recipe combines the delicious PageTemplates package with the flavorful Medusa package to serve up rendered PageTemplates from the file system.\n\nWhy not just use Zope you say?  As far as I know, the current Zope release isn't an option with Python 2.2 code.  The project for which this recipe was devised requires Python 2.2.\n\nIngredients you'll need:\n\n1.\tPython 2.2.  If you're using 2.1, try Zope instead, as it does everything this recipe can do plus a whole lot more.\n\n2.\tExtensionClass and friends.  There is more than one way to get ExtensionClass installed, but the method I've used successfully is to install StandaloneZODB.  That package is available here:  http://www.zope.org/Products/StandaloneZODB\n\n3.\tPageTemplates, TAL, and ZTUtils packages.  These are available in the Zope source releases but must be installed manually.  Again, there's more than one way to make these packages available in your system.  The method I've used is to copy the package directories from the Zope source archive into the Python lib/site-packages/ directory.  The Zope source is available from this link:  http://www.zope.org/Products\n\n4.\tMedusa.  I used Medusa 0.5.2 to develop this recipe, but you may have an equally pleasant experience with other versions.  You can get Medusa here:  http://oedipus.sourceforge.net/medusa/\n\n5.\tA Medusa startup script.  As with all Medusa handlers, you must explicitly construct a PageTemplates handler and associate it with an HTTP server.  You can modify a copy of the sample startup script included with Medusa or create your own.\n\n6.\tSome PageTemplates.  The code below reads PageTemplates markup from files stored in your file system.  Give your markup files a ".pt" or ".ptx" extension, and the handler will try to render them as PageTemplates before returning their markup.\n\nOnce you have all these items in place, modify your Medusa start up script:\n\n1.\tSave the code below as "pagetemplate_handler.py", and bring it into your script:  import pagetemplate_handler\n\n2.\tConstruct a pagetemplate_handler.pagetemplate_handler, pagetemplate_handler.pagetemplate_xml_handler, or both.   These types need a filesystem object, just like the default_handler.\n\n3.\tAssociate your pagetemplate_handler with your HTTP server.