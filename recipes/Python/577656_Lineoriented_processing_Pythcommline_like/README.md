## Line-oriented processing in Python from command line (like AWK) 
Originally published: 2011-04-14 19:48:15 
Last updated: 2011-04-14 19:49:16 
Author: Artur Siekielski 
 
A very simple but powerful shell script which enables writing ad-hoc Python scripts for processing line-oriented input. It executes the following code template:\n\n    $INIT\n    for line in sys.stdin:\n        $LOOP\n    $END\n\nwhere $INIT, $LOOP and $END code blocks are given from command line. If only one argument is given, then $INIT and $END are empty. If two arguments are given, $END is empty.\n\nExamples (script is saved as 'pyk' in the $PATH):\n\n* "wc -l" replacement:\n    $ cat file | pyk 'c=0' 'c+=1' 'print c'\n* grep replacement:\n    $ cat file | pyk 'import re' 'if re.search("\\d+", line): print line'\n* adding all numbers:\n    $ seq 1 10 | pyk 's=0' 's+=int(line)' 'print s'\n* prepending lines with it's length:\n    $ cat file | pyk 'print len(line), line'\n* longest file name:\n    $ ls -1 | pyk 'longest=""' 'if len(line) > len(longest): longest=line' 'print longest'\n* number of unique words in a document:\n    $ pyk 'words=[]' 'words.extend(line.split())' 'print "All words: {}, unique: {}".format(len(words), len(set(words))'\n